.wrapper {
  display: flex;
  justify-content: center;
  padding: clamp(2rem, 5vw, 4rem) 1.5rem 4rem;
}

.panel {
  width: min(960px, 100%);
  background:
    linear-gradient(
      160deg,
      color-mix(in srgb, var(--surface-overlay, rgba(34, 40, 68, 0.92)) 88%, transparent),
      color-mix(in srgb, var(--surface-muted, rgba(18, 22, 42, 0.92)) 94%, transparent)
    ),
    var(--surface-elevated, rgba(17, 22, 45, 0.86));
  border-radius: 28px;
  padding: clamp(2rem, 4vw, 3rem);
  box-shadow: var(--shadow-xl, 0 32px 64px rgba(8, 12, 24, 0.35));
  color: var(--text, var(--color-fg, #f8f9ff));
  display: grid;
  grid-template-columns: minmax(160px, 200px) minmax(0, 1fr);
  gap: clamp(1.5rem, 4vw, 2.5rem);
  position: relative;
  overflow: hidden;
}

.panel::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(
    200deg,
    color-mix(in srgb, var(--color-brand, #556cff) 40%, transparent),
    transparent 65%
  );
  mix-blend-mode: screen;
}

.stepper {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  position: relative;
  z-index: 1;
}

.stepTitle {
  font-size: 0.95rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-3, rgba(248, 249, 255, 0.65));
}

.stepList {
  display: grid;
  gap: 1.25rem;
}

.stepItem {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--text-3, rgba(248, 249, 255, 0.6));
  font-size: 0.95rem;
  font-weight: 500;
}

.stepItem[data-active="true"] {
  color: var(--text, #ffffff);
}

.stepBullet {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid currentColor;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.stepItem[data-active="true"] .stepBullet {
  background: currentColor;
}

.header {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.content {
  display: flex;
  flex-direction: column;
  gap: clamp(1.5rem, 4vw, 2.25rem);
  position: relative;
  z-index: 1;
}

.title {
  font-size: clamp(1.8rem, 3vw, 2.4rem);
  font-weight: 700;
  margin: 0;
  color: var(--text, #ffffff);
}

.form {
  display: grid;
  gap: 1.25rem;
}

.label {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.label span {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-2, rgba(248, 249, 255, 0.82));
}

.nameInput {
  background: color-mix(in srgb, var(--surface-overlay, rgba(18, 22, 42, 0.65)) 90%, transparent);
  border: 1px solid
    color-mix(in srgb, var(--color-border, rgba(255, 255, 255, 0.12)) 80%, transparent);
  color: inherit;
  font-size: 1.05rem;
  padding: 0.9rem 1rem;
  border-radius: 16px;
  transition:
    border-color 180ms ease,
    box-shadow 180ms ease,
    background 180ms ease;
}

.nameInput:focus-visible {
  border-color: color-mix(in srgb, var(--color-brand, #6366f1) 65%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-brand, #6366f1) 35%, transparent);
  background: color-mix(in srgb, var(--surface-overlay, rgba(32, 38, 70, 0.8)) 96%, transparent);
  outline: none;
}

.chatStack {
  display: grid;
  gap: 1.25rem;
}

.chatLog {
  background: color-mix(in srgb, var(--surface-overlay, rgba(12, 16, 30, 0.62)) 88%, transparent);
  border: 1px solid
    color-mix(in srgb, var(--color-border, rgba(255, 255, 255, 0.12)) 65%, transparent);
  border-radius: 24px;
  padding: clamp(1rem, 3vw, 1.5rem);
  min-height: clamp(240px, 38vh, 320px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.chatMessage {
  display: flex;
  gap: 0.75rem;
  align-items: flex-start;
}

.chatAvatar {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
  font-weight: 600;
  background: color-mix(in srgb, var(--color-brand, #5868ff) 24%, transparent);
  color: var(--text-on-brand, rgba(207, 214, 255, 0.95));
}

.chatMessage[data-role="user"] .chatAvatar {
  background: color-mix(in srgb, var(--surface-elevated, #ffffff) 24%, transparent);
  color: var(--text, #ffffff);
}

.chatBubble {
  background: color-mix(in srgb, var(--color-brand, #6366f1) 20%, transparent);
  border: 1px solid
    color-mix(
      in srgb,
      var(--color-brand, #6366f1) 28%,
      var(--color-border, rgba(255, 255, 255, 0.12))
    );
  border-radius: 16px;
  padding: 0.75rem 0.9rem;
  font-size: 0.95rem;
  line-height: 1.6;
  color: var(--text-on-brand, rgba(248, 249, 255, 0.9));
  white-space: pre-wrap;
  word-break: break-word;
}

.chatMessage[data-role="user"] .chatBubble {
  background: color-mix(in srgb, var(--surface-elevated, #ffffff) 18%, transparent);
  border-color: color-mix(
    in srgb,
    var(--color-border-strong, rgba(255, 255, 255, 0.24)) 80%,
    transparent
  );
  color: var(--text, #ffffff);
}

.prompterShell {
  position: relative;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  border-radius: var(--radius-pill, 999px);
  padding: 0.85rem 1.1rem;
  background: linear-gradient(
    180deg,
    var(--glass-bg-1, rgba(255, 255, 255, 0.12)),
    var(--glass-bg-2, rgba(255, 255, 255, 0.06))
  );
  border: 1px solid var(--pill-border, rgba(255, 255, 255, 0.16));
  box-shadow: var(--home-promptbar-box-shadow, 0 20px 40px rgba(5, 10, 30, 0.35));
  backdrop-filter: blur(var(--glass-blur-strong, 16px)) saturate(var(--glass-saturate, 120%));
  -webkit-backdrop-filter: blur(var(--glass-blur-strong, 16px))
    saturate(var(--glass-saturate, 120%));
}

.prompterShell::before {
  content: "";
  position: absolute;
  inset: -14px;
  border-radius: var(--radius-pill, 999px);
  background: var(--home-promptbar--before-background, transparent);
  filter: blur(var(--prompt-glow-blur, 18px));
  opacity: var(--prompt-glow-opacity, 0.4);
  z-index: -1;
}

.chatTextarea {
  width: 100%;
  flex: 1;
  min-height: 48px;
  max-height: 160px;
  resize: none;
  border: none;
  background: transparent;
  color: var(--text, inherit);
  font-size: 0.95rem;
  line-height: 1.6;
  padding: 0;
}

.chatTextarea:focus-visible {
  outline: none;
}

.chatTextarea::placeholder {
  color: var(--text-3, rgba(248, 249, 255, 0.5));
  opacity: 0.8;
}

.prompterActions {
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.voiceButton {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: 1px solid var(--icon-plate-border, rgba(255, 255, 255, 0.16));
  background: linear-gradient(
    180deg,
    var(--icon-plate-bg-1, rgba(255, 255, 255, 0.24)),
    var(--icon-plate-bg-2, rgba(255, 255, 255, 0.12))
  );
  color: var(--text-2, rgba(248, 249, 255, 0.75));
  box-shadow: var(--icon-plate-highlight, inset 0 1px 0 rgba(255, 255, 255, 0.4));
  cursor: pointer;
  padding: 0;
  transition:
    transform 160ms ease,
    box-shadow 160ms ease,
    opacity 160ms ease,
    background 160ms ease,
    color 160ms ease;
}

.voiceButton svg {
  width: 18px;
  height: 18px;
}

.voiceButton:hover {
  transform: translateY(-1px);
  box-shadow: 0 16px 32px
    color-mix(in srgb, var(--color-brand, #6366f1) 26%, rgba(10, 12, 30, 0.55));
}

.voiceButton:active {
  transform: scale(0.96);
}

.voiceButton:disabled {
  opacity: 0.55;
  cursor: default;
  transform: none;
  box-shadow: var(--icon-plate-highlight, inset 0 1px 0 rgba(255, 255, 255, 0.4));
}

.voiceButton[data-active="true"] {
  background: color-mix(in srgb, var(--color-brand, #6366f1) 28%, transparent);
  color: var(--text-on-brand, rgba(248, 249, 255, 0.92));
  box-shadow: 0 20px 36px color-mix(in srgb, var(--color-brand, #6366f1) 32%, rgba(10, 12, 30, 0.6));
}

.voiceButton:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-brand, #6366f1) 50%, transparent);
  outline-offset: 2px;
}

.prompterIcon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: 1px solid var(--icon-plate-border, rgba(255, 255, 255, 0.16));
  background: linear-gradient(
    180deg,
    var(--icon-plate-bg-1, rgba(255, 255, 255, 0.24)),
    var(--icon-plate-bg-2, rgba(255, 255, 255, 0.12))
  );
  color: var(--text-2, rgba(248, 249, 255, 0.75));
  box-shadow: var(--icon-plate-highlight, inset 0 1px 0 rgba(255, 255, 255, 0.4));
}

.prompterIcon svg {
  width: 18px;
  height: 18px;
}

.prompterSend {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 42px;
  height: 42px;
  border-radius: 999px;
  border: none;
  background: var(
    --prompter-primary-button-background,
    var(
      --cta-chip-gradient,
      var(--cta-gradient, linear-gradient(120deg, #7b5cff 0%, #6366f1 55%, #22d3ee 100%))
    )
  );
  color: var(--prompter-primary-button-text, var(--cta-button-text, #ffffff));
  box-shadow: var(
    --cta-chip-shadow,
    0 20px 40px color-mix(in srgb, var(--color-brand, #6366f1) 28%, rgba(10, 12, 30, 0.6))
  );
  transition:
    transform 160ms ease,
    box-shadow 160ms ease,
    opacity 160ms ease;
}

.prompterSend:not(:disabled):hover {
  transform: translateY(-1px);
  box-shadow: 0 24px 48px color-mix(in srgb, var(--color-brand, #6366f1) 32%, rgba(10, 12, 30, 0.6));
}

.prompterSend:not(:disabled):active {
  transform: scale(0.96);
  box-shadow: 0 16px 32px
    color-mix(in srgb, var(--color-brand, #6366f1) 28%, rgba(10, 12, 30, 0.65));
}

.prompterSend:disabled {
  opacity: 0.55;
  cursor: default;
  transform: none;
  box-shadow: 0 12px 24px color-mix(in srgb, var(--color-brand, #6366f1) 18%, rgba(10, 12, 30, 0.5));
}

.prompterMeta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.chatStatus {
  font-size: 0.85rem;
  color: var(--text-3, rgba(248, 249, 255, 0.5));
  flex: 1 1 auto;
}

.controls {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.error {
  font-size: 0.9rem;
  color: var(--color-danger, #f87171);
}

.chatError {
  font-size: 0.85rem;
  color: var(--color-danger, #f87171);
}

.prompterHint {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-2, rgba(248, 249, 255, 0.75));
  max-width: 52ch;
}

@media (max-width: 880px) {
  .panel {
    grid-template-columns: 1fr;
  }

  .stepper {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }

  .stepList {
    display: flex;
    gap: 1rem;
  }

  .stepItem {
    flex-direction: column;
    align-items: center;
    font-size: 0.85rem;
  }

  .stepBullet {
    width: 12px;
    height: 12px;
  }

  .prompterMeta {
    align-items: flex-start;
  }
}
