.page {
  max-width: 1200px;

  margin: 0 auto;

  padding: 24px 20px 64px;
}

.feedEmpty {
  margin: 0;
  padding: clamp(36px, 6vw, 56px) clamp(20px, 4vw, 48px);
  border-radius: var(--radius-2xl, 20px);
  border: 1px dashed
    color-mix(in srgb, var(--card-border, rgba(255, 255, 255, 0.16)) 70%, transparent);
  background:
    linear-gradient(
      180deg,
      color-mix(in srgb, var(--color-brand) 12%, transparent),
      color-mix(in srgb, var(--color-brand) 4%, transparent)
    ),
    linear-gradient(180deg, var(--card-bg-1), var(--card-bg-2));
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    inset 0 -1px 0 rgba(2, 6, 23, 0.4),
    0 18px 36px rgba(5, 10, 30, 0.26);
  text-align: center;
  display: grid;
  gap: 12px;
  justify-items: center;
}

.feedEmptyTitle {
  font-size: clamp(1.2rem, 2.6vw, 1.6rem);
  font-weight: 900;
  margin: 0;
  color: var(--text, rgba(255, 255, 255, 0.92));
}

.feedEmptySubtitle {
  margin: 0;
  max-width: 420px;
  color: var(--text-2);
  font-size: 1rem;
}

@media (max-width: 640px) {
  .page {
    padding: 12px 0 16px;
  }
}

.prompterStage {
  max-width: 860px;

  /* Spacing handled by AppShell wrapper to keep pages consistent */

  margin: 0 auto;

  padding: 0;

  border-radius: 22px;

  background: transparent;

  border: none;

  box-shadow: none;

  position: relative;

  z-index: 300;

  isolation: isolate;
}

.prompterStage::before {
  content: none;
}

.prompter {
  position: relative;

  z-index: 1;

  display: grid;

  gap: 16px;
}

.prompterStage[data-dropping="true"] .promptBar {
  border-color: color-mix(in srgb, var(--color-brand) 55%, rgba(255, 255, 255, 0.32));

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.24),
    inset 0 -1px 0 rgba(2, 6, 23, 0.48),
    0 16px 32px color-mix(in srgb, var(--color-brand) 35%, rgba(5, 10, 30, 0.44));
}

.prompterDropOverlay {
  position: absolute;

  inset: -6px;

  border-radius: 26px;

  display: flex;

  align-items: center;

  justify-content: center;

  z-index: 4;

  pointer-events: none;

  background: var(--home-prompterdropoverlay-background);

  backdrop-filter: blur(var(--glass-blur-overlay, 20px)) saturate(var(--glass-saturate, 120%));

  -webkit-backdrop-filter: blur(var(--glass-blur-overlay, 20px))
    saturate(var(--glass-saturate, 120%));

  border: 1px dashed color-mix(in srgb, var(--color-brand) 55%, rgba(255, 255, 255, 0.42));

  box-shadow: var(--home-prompterdropoverlay-box-shadow);
}

.prompterDropCard {
  display: inline-flex;

  align-items: center;

  gap: 10px;

  padding: 14px 18px;

  border-radius: 18px;

  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--color-brand) 32%, rgba(255, 255, 255, 0.12)),
    rgba(10, 14, 34, 0.78)
  );

  border: var(--home-prompterdropcard-border);

  box-shadow: var(--home-prompterdropcard-box-shadow);

  color: var(--text);

  text-align: center;

  pointer-events: none;
}

.prompterDropIcon {
  color: color-mix(in srgb, var(--color-brand) 75%, rgba(255, 255, 255, 0.85));

  width: 28px;

  height: 28px;
}

.prompterDropLabel {
  font-weight: 700;

  font-size: 0.95rem;

  letter-spacing: 0.01em;
}

@media (max-width: 640px) {
  .prompterStage {
    margin-bottom: 0;
  }
}

.prompter {
  display: grid;

  gap: 16px;
}

.promptBar {
  position: relative;

  display: flex;

  align-items: center;

  gap: 10px;

  border-radius: var(--pill-radius, 999px);

  padding: 12px 14px;

  background: linear-gradient(
    180deg,
    var(--glass-bg-1, rgba(255, 255, 255, 0.1)),
    var(--glass-bg-2, rgba(255, 255, 255, 0.05))
  );

  border: 1px solid var(--pill-border);

  box-shadow: var(--home-promptbar-box-shadow);

  backdrop-filter: blur(var(--glass-blur-strong, 16px)) saturate(var(--glass-saturate, 120%));

  -webkit-backdrop-filter: blur(var(--glass-blur-strong, 16px))
    saturate(var(--glass-saturate, 120%));
}

.promptBar::before {
  content: "";

  position: absolute;

  left: -18px;

  right: -18px;

  top: -14px;

  bottom: -14px;

  border-radius: var(--pill-radius, 999px);

  pointer-events: none;

  background: var(--home-promptbar--before-background);

  filter: blur(var(--prompt-glow-blur, 18px));

  opacity: var(--prompt-glow-opacity, 0.54);

  z-index: -1;
}

@media (max-width: 640px) {
  .promptBar::before {
    left: -12px;

    right: -12px;
  }
}

.promptBar:focus-within {
  border-color: var(--home-promptbar-focus-within-border-color);

  box-shadow: var(--home-promptbar-focus-within-box-shadow);
}

.input {
  flex: 1;

  min-width: 0; /* allow prompt to shrink on narrow viewports */

  background: transparent;

  border: none;

  color: var(--text);

  font-size: 16px;

  outline: none;

  padding: 8px 4px;
}

/* Inline attach button inside the prompter */

.promptAttachBtn {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  width: 34px;

  height: 34px;

  border-radius: 12px;

  border: 1px solid var(--icon-plate-border);

  background: linear-gradient(180deg, var(--icon-plate-bg-1), var(--icon-plate-bg-2));

  color: var(--text);

  box-shadow: var(--icon-plate-highlight);
}

.promptAttachBtn:hover {
  transform: translateY(-1px);

  border-color: var(--card-hover-border, rgba(255, 255, 255, 0.26));

  color: var(--text);
}

.promptAttachBtn:disabled {
  opacity: 0.6;

  cursor: not-allowed;

  transform: none;
}

.promptAttachIcon {
  width: 20px;

  height: 20px;
}

@media (max-width: 640px) {
  .voiceBtn {
    display: none;
  }
}

.voiceBtn {
  position: relative;

  transition:
    transform 0.18s ease,
    border-color 0.18s ease,
    box-shadow 0.18s ease,
    background 0.18s ease;
}

.voiceBtn[data-active="true"] {
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--color-brand) 75%, rgba(255, 255, 255, 0.12)),
    color-mix(in srgb, var(--color-brand) 45%, rgba(2, 6, 23, 0.7))
  );

  border-color: color-mix(in srgb, var(--color-brand) 65%, rgba(255, 255, 255, 0.18));

  color: var(--text);

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.2),
    inset 0 -1px 0 rgba(2, 6, 23, 0.48),
    0 0 0 3px color-mix(in srgb, var(--color-brand) 25%, transparent);
}

.voiceBtn[data-status="error"] {
  border-color: color-mix(in srgb, var(--color-danger) 65%, rgba(255, 255, 255, 0.2));
}

.voiceBtn[data-active="true"]:hover {
  transform: translateY(-1px);
}

.voiceIcon {
  width: 18px;

  height: 18px;
}

.voicePulse {
  position: absolute;

  inset: -4px;

  border-radius: 999px;

  border: 2px solid color-mix(in srgb, var(--color-brand) 75%, rgba(255, 255, 255, 0.25));

  pointer-events: none;

  opacity: 0;

  transform: scale(0.7);
}

.voiceBtn[data-active="true"] .voicePulse {
  opacity: 0.85;

  animation: voicePulse 1.4s ease-out infinite;
}

@keyframes voicePulse {
  0% {
    transform: scale(0.7);

    opacity: 0.7;
  }

  70% {
    transform: scale(1.25);

    opacity: 0;
  }

  100% {
    transform: scale(1.45);

    opacity: 0;
  }
}

.genBtn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  border-radius: var(--radius-pill, 999px);
  padding: 9px 16px;
  background: var(--cta-chip-gradient, var(--cta-button-gradient, var(--cta-gradient)));
  color: var(--cta-chip-text, var(--cta-button-text, var(--text)));
  font-weight: 700;
  letter-spacing: 0.01em;
  border: 1px solid var(--cta-chip-border, var(--chip-border, var(--pill-border)));
  box-shadow: var(--cta-chip-shadow, var(--chip-shadow, var(--shadow-lg)));
  position: relative;
  overflow: hidden;
  isolation: isolate;
  transition:
    transform 0.16s ease,
    box-shadow 0.16s ease,
    border-color 0.16s ease,
    background 0.16s ease,
    color 0.16s ease;
}

/* Split generate button with inline caret */

.genSplit {
  display: inline-flex;

  align-items: stretch;

  border-radius: 999px;

  flex-shrink: 0;
}

.genSplitMain {
  border-top-right-radius: 0;

  border-bottom-right-radius: 0;

  display: inline-flex;

  align-items: center;

  justify-content: center;

  /* Prevent the label from shrinking under the caret on small screens */

  flex: 0 0 auto;

  min-width: max-content;
}

.genSplitCaret {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  padding: 0 10px;

  border-radius: 0 999px 999px 0;

  border: 1px solid var(--pill-border);

  border-left-color: var(--card-border);

  margin-left: -1px; /* visually merge with main button */

  background: linear-gradient(
    180deg,
    var(--glass-bg-1, rgba(255, 255, 255, 0.12)),
    var(--glass-bg-2, rgba(255, 255, 255, 0.06))
  );

  color: var(--text);

  font-weight: 800;

  box-shadow: var(--home-gensplitcaret-box-shadow);
}

.caretGlyph {
  font-size: 0.9rem;

  line-height: 1;
}

@media (max-width: 480px) {
  .promptBar {
    gap: 6px;

    padding: 10px 12px;
  }

  .promptAttachBtn {
    width: 30px;

    height: 30px;
  }

  .genSplit {
    flex-shrink: 0;

    min-width: 132px;
  }

  .genSplitMain {
    padding: 9px 18px;

    /* Ensure full word "Generate" always fits next to caret */

    min-width: max-content;
  }

  .genSplitCaret {
    padding: 0 10px;
  }
}

/* Override intent chip wrapper when rendered inside split group */

.intentOverrideInline {
  position: relative;

  margin-left: 0;
}

.genBtn:hover {
  transform: translateY(-1px) scale(1.02);
  border-color: var(
    --cta-chip-border-hover,
    var(--cta-chip-border, var(--chip-hover-border, var(--card-hover-border)))
  );
  box-shadow: var(--cta-chip-shadow-hover, var(--chip-hover-shadow, var(--shadow-lg)));
  color: var(--cta-chip-text, var(--cta-button-text, var(--text)));
}

.genBtn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
  box-shadow: var(--chip-shadow, var(--shadow-sm));
}

.genBtnNavigate {
  background: linear-gradient(
    120deg,
    color-mix(in srgb, var(--color-success) 80%, transparent),
    color-mix(in srgb, var(--color-accent) 65%, transparent)
  );
  color: var(--text);
  border: 1px solid color-mix(in srgb, var(--color-success) 55%, transparent);
  box-shadow: 0 18px 36px
    color-mix(in srgb, var(--color-success) 36%, var(--surface-overlay, var(--surface-elevated)));
}

.genBtnPost {
  background: linear-gradient(
    120deg,
    color-mix(in srgb, var(--color-warning) 72%, transparent),
    color-mix(in srgb, var(--color-accent) 40%, transparent)
  );
  color: var(--text);
  border: 1px solid color-mix(in srgb, var(--color-warning) 55%, transparent);
  box-shadow: 0 18px 36px
    color-mix(in srgb, var(--color-warning) 34%, var(--surface-overlay, var(--surface-elevated)));
}

.genBtnPost:hover {
  box-shadow: 0 24px 48px
    color-mix(in srgb, var(--color-warning) 44%, var(--surface-overlay, var(--surface-elevated)));
}

/* Keep Style intent distinct but not the full Launch CTA look */

.genBtnStyle {
  background: var(--cta-chip-gradient, var(--cta-button-gradient, var(--cta-gradient)));
  color: var(--cta-chip-text, var(--cta-button-text, var(--text)));
  border: 1px solid var(--cta-chip-border, var(--chip-border));
  box-shadow: var(--cta-chip-shadow, var(--shadow-lg));
}

.genBtnStyle:hover {
  box-shadow: var(
    --cta-chip-shadow-hover,
    var(--chip-hover-shadow, var(--shadow-xl, var(--shadow-lg)))
  );
  color: var(--cta-chip-text, var(--cta-button-text, var(--text)));
}

.genLabel {
  position: relative;

  top: 0.5px;

  font-size: 0.95rem;

  white-space: nowrap;
}

.chips {
  display: flex;

  flex-wrap: wrap;

  gap: 10px;

  justify-content: flex-start;

  padding-left: 6px;
}

@media (max-width: 640px) {
  .chips {
    padding-left: 0;
  }
}

.chip {
  padding: 7px 12px;
  border-radius: var(--radius-pill, 999px);
  border: 1px solid var(--chip-border, var(--pill-border));
  background: linear-gradient(
    180deg,
    var(--chip-bg-1, var(--glass-bg-1, var(--pill-bg-1))),
    var(--chip-bg-2, var(--glass-bg-2, var(--pill-bg-2)))
  );
  font-weight: 700;
  color: var(--text);
  box-shadow: var(--chip-shadow, var(--shadow-sm));
}

.chip:hover {
  border-color: var(--chip-hover-border, var(--chip-border, var(--pill-border)));
  background: linear-gradient(
    180deg,
    var(--chip-hover-bg-1, var(--chip-bg-1)),
    var(--chip-hover-bg-2, var(--chip-bg-2))
  );
  color: var(--text);
  box-shadow: var(--chip-hover-shadow, var(--shadow-md));
}

.chip[data-active="true"] {
  border-color: var(--chip-active-border, color-mix(in srgb, var(--color-brand) 55%, transparent));
  background: linear-gradient(
    180deg,
    var(--chip-active-bg-1, color-mix(in srgb, var(--color-brand) 18%, transparent)),
    var(--chip-active-bg-2, color-mix(in srgb, var(--color-accent) 8%, transparent))
  );
  box-shadow: var(--chip-active-shadow, var(--chip-hover-shadow, var(--shadow-md)));
}

.intentControls {
  display: flex;

  align-items: center;

  justify-content: space-between;

  gap: 12px;

  padding: 0;

  flex-wrap: wrap;

  position: relative;

  z-index: 120;

  margin-top: -8px; /* visually tucks into the prompter pill */

  margin-left: 8px;

  margin-right: 8px;

  background: transparent;

  border: none;

  box-shadow: none;

  backdrop-filter: none;

  -webkit-backdrop-filter: none;
}

@media (max-width: 640px) {
  .intentControls {
    flex-direction: column;

    align-items: flex-start;

    gap: 8px;

    padding: 0;
  }
}

.attachGroup {
  display: flex;

  align-items: center;

  gap: 10px;

  flex-wrap: wrap;
}

.attachButton {
  display: inline-flex;

  align-items: center;

  gap: 8px;

  padding: 7px 14px;

  border-radius: 12px;

  border: none;

  background:
    radial-gradient(
      60% 100% at 20% 0%,

      color-mix(in srgb, var(--color-brand) 22%, transparent),
      transparent 70%
    ),
    linear-gradient(
      180deg,
      var(--glass-bg-1, rgba(255, 255, 255, 0.12)),
      var(--glass-bg-2, rgba(255, 255, 255, 0.05))
    );

  color: var(--text);

  font-weight: 700;

  font-size: 0.85rem;

  letter-spacing: 0.01em;

  box-shadow:
    inset 0 1px 0 color-mix(in srgb, var(--color-fg) 22%, transparent),
    var(--shadow-md, 8px 12px 22px rgba(5, 10, 30, 0.3));

  transition:
    transform 0.16s ease,
    border-color 0.16s ease,
    background 0.16s ease,
    color 0.16s ease,
    box-shadow 0.16s ease;
}

.attachButton:hover {
  transform: translateY(-1px);

  color: var(--text);

  box-shadow: var(--home-attachbutton-hover-box-shadow);
}

.attachButton:disabled {
  opacity: 0.55;

  cursor: not-allowed;

  transform: none;
}

.attachIcon {
  font-size: 1.05rem;

  line-height: 1;

  filter: drop-shadow(0 2px 4px color-mix(in srgb, var(--color-brand) 45%, transparent));
}

.attachLabel {
  font-weight: 600;
}

.attachInput {
  display: none;
}

.attachmentChip {
  display: inline-flex;

  align-items: center;

  gap: 6px;

  padding: 5px 10px;

  border-radius: 12px;

  border: 1px solid var(--pill-border);

  background: linear-gradient(150deg, var(--glass-bg-1), var(--glass-bg-2));

  color: var(--text);

  font-weight: 600;

  font-size: 0.78rem;

  box-shadow: var(--home-attachmentchip-box-shadow);
}

.attachmentChip[data-status="uploading"] {
  color: var(--text);
}

.attachmentChip[data-status="error"] {
  border-color: color-mix(in srgb, var(--color-danger) 42%, transparent);

  color: color-mix(in srgb, var(--color-danger) 26%, var(--text));

  background: linear-gradient(
    150deg,
    color-mix(in srgb, var(--color-danger) 28%, transparent),
    color-mix(in srgb, var(--color-danger) 18%, transparent)
  );
}

.attachmentName {
  max-width: 140px;

  overflow: hidden;

  text-overflow: ellipsis;

  white-space: nowrap;
}

.attachmentStatus {
  font-size: 0.74rem;

  opacity: 0.75;
}

.attachmentStatusError {
  font-size: 0.74rem;

  color: color-mix(in srgb, var(--color-danger) 26%, var(--text));
}

.attachmentRemove {
  border: none;

  background: transparent;

  color: inherit;

  font-weight: 700;

  cursor: pointer;

  padding: 0 2px;

  display: inline-flex;

  align-items: center;

  justify-content: center;

  line-height: 1;
}

.attachmentRemove:hover {
  opacity: 0.7;
}

.intentOverride {
  position: relative;

  display: inline-flex;

  margin-left: auto;

  z-index: 160;
}

.intentChip {
  position: relative;

  display: inline-flex;

  align-items: center;

  gap: 8px;

  padding: 7px 12px;

  border-radius: 14px;

  border: none;

  background: linear-gradient(150deg, var(--glass-bg-1), var(--glass-bg-2));

  color: var(--text);

  font-weight: 700;

  font-size: 0.82rem;

  letter-spacing: 0.01em;

  box-shadow: var(--home-intentchip-box-shadow);

  backdrop-filter: blur(18px) saturate(140%);

  -webkit-backdrop-filter: blur(18px) saturate(140%);

  transition:
    transform 0.18s ease,
    border-color 0.18s ease,
    box-shadow 0.18s ease,
    background 0.18s ease,
    color 0.18s ease;
}

.intentChip::before {
  content: "";

  position: absolute;

  inset: 2px;

  border-radius: inherit;

  background: linear-gradient(
    160deg,
    color-mix(in srgb, var(--color-fg) 12%, transparent),
    color-mix(in srgb, var(--color-fg) 2%, transparent)
  );

  opacity: 0.85;

  pointer-events: none;
}

.intentChip:hover {
  color: var(--text);

  transform: translateY(-1px);

  box-shadow: var(--shadow-md, 12px 18px 30px rgba(6, 10, 30, 0.4));

  background: linear-gradient(150deg, var(--glass-bg-1), var(--glass-bg-2));
}

.intentChip:active {
  transform: translateY(0);
}

.intentChipActive {
  border: none;

  background: var(--home-intentchipactive-background);

  color: var(--home-intentchipactive-color);

  box-shadow: var(--home-intentchipactive-box-shadow);
}

/* Intent-specific active chip colors */

.intentChipActive[data-intent="post"] {
  background: linear-gradient(
    120deg,
    color-mix(in srgb, var(--color-warning) 72%, transparent),
    color-mix(in srgb, var(--color-accent) 40%, transparent)
  );

  color: var(--text);

  box-shadow: var(--shadow-lg, 0 18px 36px rgba(249, 115, 22, 0.34));
}

.intentChipActive[data-intent="navigate"] {
  background: linear-gradient(
    120deg,
    color-mix(in srgb, var(--color-success) 80%, transparent),
    color-mix(in srgb, var(--color-accent) 65%, transparent)
  );

  color: var(--text);

  box-shadow: var(--shadow-lg, 0 18px 36px rgba(34, 197, 94, 0.36));
}

.intentChipActive[data-intent="style"] {
  background:
    linear-gradient(
      160deg,
      color-mix(in srgb, var(--color-brand) 22%, transparent),
      color-mix(in srgb, var(--color-accent) 12%, transparent)
    ),
    linear-gradient(
      180deg,
      var(--glass-bg-1, rgba(255, 255, 255, 0.12)),
      var(--glass-bg-2, rgba(255, 255, 255, 0.06))
    );

  background-blend-mode: overlay, normal;

  color: var(--text);

  box-shadow: var(--home-intentchipactive-box-shadow-2);
}

.intentCaret {
  display: inline-flex;

  align-items: center;

  font-size: 0.7rem;

  font-weight: 600;

  opacity: 0.65;
}

.intentMenu {
  position: absolute;

  top: calc(100% + 8px);

  right: 0;

  min-width: 220px;

  display: grid;

  gap: 8px;

  padding: 12px;

  border-radius: 14px;

  border: 1px solid var(--card-border);

  background: linear-gradient(180deg, var(--glass-bg-1), var(--glass-bg-2));

  box-shadow: var(--card-shadow);

  backdrop-filter: blur(22px) saturate(160%);

  z-index: 220;
}

.intentMenu button {
  text-align: left;

  padding: 10px 12px;

  border-radius: 10px;

  border: 1px solid var(--pill-border);

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));

  color: var(--text);

  font-weight: 700;

  font-size: 0.9rem;
}

.intentMenu button:hover {
  border-color: var(--card-hover-border, rgba(255, 255, 255, 0.3));

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));
}

@media (max-width: 640px) {
  .intentOverride {
    margin-left: 0;

    width: 100%;
  }
}

.layout {
  margin-top: 18px;

  display: grid;

  grid-template-columns: 1fr 320px;

  gap: 18px;

  align-items: start;
}

@media (max-width: 1000px) {
  .layout {
    grid-template-columns: 1fr;
  }
}

.promoRowSpace {
  grid-column: 1;

  width: 100%;
}

@media (max-width: 1000px) {
  .promoRowSpace {
    max-width: 100%;
  }
}

/* Edge-to-edge promo tiles on small screens (aligned with page padding removal) */

@media (max-width: 640px) {
  .promoRowSpace {
    margin-left: 0;

    margin-right: 0;
  }
}

.feed {
  .feedSkeleton {
    display: grid;

    gap: 16px;
  }

  @keyframes feedSkeletonShimmer {
    0% {
      background-position: -240px 0;
    }

    100% {
      background-position: calc(240px + 100%) 0;
    }
  }

  .skeletonCard {
    position: relative;

    overflow: hidden;

    pointer-events: none;
  }

  .skeletonCard * {
    user-select: none;
  }

  .skeletonBackdrop {
    position: absolute;

    inset: 0;

    z-index: 0;

    background: var(--home-skeletonbackdrop-background);

    filter: blur(28px);

    opacity: 0.75;
  }

  .skeletonHead,
  .skeletonBody,
  .skeletonMedia,
  .skeletonActions {
    position: relative;

    z-index: 1;

    backdrop-filter: blur(16px) saturate(120%);

    -webkit-backdrop-filter: blur(16px) saturate(120%);

    border-color: transparent;
  }

  .skeletonHeaderMeta {
    display: grid;

    gap: 8px;

    flex: 1;
  }

  .skeletonAvatar {
    display: inline-flex;

    width: 44px;

    height: 44px;

    border-radius: 50%;

    background: color-mix(in srgb, var(--surface-1) 80%, rgba(255, 255, 255, 0.12));

    position: relative;

    overflow: hidden;
  }

  .skeletonIconBtn {
    position: relative;

    overflow: hidden;

    background: color-mix(in srgb, var(--surface-1) 80%, rgba(255, 255, 255, 0.12));
  }

  .skeletonBody {
    display: grid;

    padding: 18px 16px 10px;

    gap: 12px;
  }

  .skeletonMedia {
    min-height: 220px;

    padding: 0 14px 14px;
  }

  .skeletonActions {
    display: flex;

    gap: 16px;

    justify-content: space-between;

    padding: 14px 16px 18px;
  }

  .skeletonLine,
  .skeletonPill,
  .skeletonTile,
  .skeletonAvatar,
  .skeletonIconBtn {
    position: relative;

    overflow: hidden;

    background: var(--home-skeletoniconbtn-background);
  }

  .skeletonLine::after,
  .skeletonPill::after,
  .skeletonTile::after,
  .skeletonAvatar::after,
  .skeletonIconBtn::after {
    content: "";

    position: absolute;

    inset: 0;

    background: var(--home-skeletoniconbtn--after-background);

    background-size: 240px 100%;

    animation: feedSkeletonShimmer 1.8s ease-in-out infinite;
  }

  .skeletonLine {
    height: 12px;

    border-radius: 999px;
  }

  .skeletonLineWide {
    width: 70%;
  }

  .skeletonLineMedium {
    width: 55%;
  }

  .skeletonLineShort {
    width: 35%;
  }

  .skeletonPill {
    display: inline-flex;

    height: 36px;

    border-radius: 999px;
  }

  .skeletonPillWide {
    flex: 1 1 40%;
  }

  .skeletonPillMedium {
    flex: 1 1 30%;
  }

  .skeletonTile {
    display: block;

    height: 160px;

    border-radius: 16px;
  }

  .skeletonMedia {
    display: grid;

    gap: 12px;

    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }

  @media (max-width: 640px) {
    .skeletonMedia {
      grid-template-columns: 1fr;
    }
  }

  .cardRefreshing {
    position: relative;

    pointer-events: none;
  }

  .cardRefreshing::after {
    content: "";

    position: absolute;

    inset: 0;

    z-index: 2;

    background: var(--home-cardrefreshing--after-background);

    backdrop-filter: blur(8px) saturate(120%);

    -webkit-backdrop-filter: blur(8px) saturate(120%);

    opacity: 1;
  }

  .cardRefreshing > * {
    filter: saturate(70%);
  }

  .feedSentinel {
    width: 100%;

    height: 24px;
  }

  @media (prefers-reduced-motion: reduce) {
    .skeletonLine::after,
    .skeletonPill::after,
    .skeletonTile::after,
    .skeletonAvatar::after,
    .skeletonIconBtn::after {
      animation: none;
    }
  }

  display: grid;

  gap: 16px;
}

.card {
  position: relative;

  border: 1px solid var(--card-border);

  background: linear-gradient(180deg, var(--card-bg-1), var(--card-bg-2));

  border-radius: var(--card-radius, 16px);

  overflow: hidden;

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(2, 6, 23, 0.45),
    var(--card-shadow, 0 18px 40px rgba(5, 10, 30, 0.35));

  backdrop-filter: blur(var(--glass-blur, 12px)) saturate(var(--glass-saturate, 120%));

  -webkit-backdrop-filter: blur(var(--glass-blur, 12px)) saturate(var(--glass-saturate, 120%));

  transition:
    transform 0.16s ease,
    box-shadow 0.16s ease,
    border-color 0.16s ease,
    background 0.16s ease;
}

@media (max-width: 640px) {
  .card {
    border-radius: 0;

    border-width: 1px 0;
  }
}

.card::before {
  content: "";

  position: absolute;

  inset: 0;

  border-radius: inherit;

  pointer-events: none;

  background: var(--home-card--before-background);

  opacity: 0;

  transition: opacity 0.16s ease;
}

.card:hover,
.card:focus-within {
  transform: translateY(-1px);

  border-color: var(--card-hover-border, rgba(255, 255, 255, 0.22));

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.14),
    inset 0 -1px 0 rgba(2, 6, 23, 0.55),
    var(--card-hover-shadow, 0 22px 46px rgba(5, 10, 30, 0.45));

  background: linear-gradient(
    180deg,
    var(--card-hover-bg-1, rgba(14, 18, 42, 0.94)),
    var(--card-hover-bg-2, rgba(12, 16, 38, 0.84))
  );
}

.card:focus-within {
  /* Fluent focus ring without overpowering the glass shadow */

  outline: 2px solid color-mix(in srgb, var(--color-brand) 50%, transparent);

  outline-offset: -1px;
}

.card:hover::before,
.card:focus-within::before {
  opacity: 1;
}

.cardHead {
  /* Slightly tighter header without shrinking icons/avatars */

  padding: 10px 14px;

  display: flex;

  justify-content: space-between;

  align-items: center;

  color: var(--text);

  font-size: 14px;

  background: linear-gradient(
    180deg,
    var(--glass-bg-1, rgba(255, 255, 255, 0.05)),
    var(--glass-bg-2, rgba(255, 255, 255, 0.03))
  );

  border-bottom: 1px solid var(--card-border);

  transition:
    background 0.16s ease,
    border-color 0.16s ease;
}

.cardControls {
  margin-left: auto;

  display: inline-flex;

  align-items: center;

  gap: 6px;
}

.iconBtn {
  width: 34px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  border: 1px solid var(--pill-border);
  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));
  color: var(--feed-icon-text, var(--text));
  font-weight: 700;
  font-size: 1rem;
  transition:
    transform 0.14s ease,
    border-color 0.16s ease,
    background 0.16s ease,
    color 0.16s ease;
}

.iconBtn:hover {
  transform: translateY(-1px);
  border-color: var(--card-hover-border, var(--chip-hover-border));
  background: linear-gradient(
    180deg,
    var(--chip-hover-bg-1, var(--pill-bg-1)),
    var(--chip-hover-bg-2, var(--pill-bg-2))
  );
  color: var(--feed-icon-text, var(--text));
  box-shadow: var(--chip-hover-shadow, var(--shadow-md));
}

.iconBtn:active {
  transform: translateY(0);
}

.iconBtn svg {
  width: 20px;

  height: 20px;
}

.iconBtn:disabled {
  opacity: 0.55;

  cursor: not-allowed;

  transform: none;
}

.iconBtn[aria-expanded="true"] {
  border-color: var(--card-hover-border, var(--chip-hover-border));
  color: var(--feed-icon-text, var(--text));
}

.iconBtn[data-variant="memory"] {
  color: var(--feed-icon-text, var(--text));
}

.iconBtn[data-variant="memory"][data-active="true"] {
  color: var(--feed-icon-text, var(--text));
  border-color: color-mix(in srgb, var(--color-brand) 55%, transparent);
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--color-brand) 20%, transparent),
    color-mix(in srgb, var(--color-accent) 8%, transparent)
  );
  box-shadow: var(
    --chip-active-shadow,
    0 12px 26px
      color-mix(in srgb, var(--color-brand) 22%, var(--surface-overlay, var(--surface-elevated)))
  );
}

.iconBtnDelete {
  border-color: color-mix(in srgb, var(--color-danger) 32%, transparent);
  color: color-mix(in srgb, var(--color-danger) 90%, var(--feed-icon-text, var(--text)));
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--color-danger) 24%, transparent),
    color-mix(in srgb, var(--color-danger) 12%, transparent)
  );
}

.iconBtnDelete:hover {
  color: var(--feed-icon-text, var(--text));
  border-color: color-mix(in srgb, var(--color-danger) 50%, transparent);
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--color-danger) 30%, transparent),
    color-mix(in srgb, var(--color-danger) 14%, transparent)
  );
}

.card:hover .cardHead,
.card:focus-within .cardHead {
  background: var(--home-cardhead-background);

  border-bottom-color: var(--home-cardhead-border-bottom-color);
}

.cardBody {
  padding: 14px 16px 12px;
}

.media {
  width: 100%;

  max-height: 440px;

  display: block;

  border-radius: 16px;

  overflow: hidden;
}

.mediaButton {
  display: block;

  border: none;

  padding: 0;

  margin: 0;

  background: transparent;

  cursor: zoom-in;

  border-radius: 16px;

  position: relative;
}

.mediaButton:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-brand) 70%, rgba(255, 255, 255, 0.8));

  outline-offset: 3px;
}

.mediaImageButton {
  width: 100%;
}

.mediaWrapper {
  display: block;
}

.mediaImage {
  object-fit: cover;

  object-position: center;
}

.mediaVideo {
  width: 100%;

  max-height: 480px;

  border-radius: 16px;

  background: color-mix(in srgb, var(--surface-1) 55%, var(--surface-3) 45%);

  display: block;
}

.mediaGallery {
  margin-top: 16px;

  display: grid;

  gap: 12px;
}

.mediaGallery[data-count="1"] {
  grid-template-columns: 1fr;
}

.mediaGallery[data-count="2"],
.mediaGallery[data-count="3"] {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.mediaGallery[data-count="4"] {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

@media (max-width: 640px) {
  .mediaGallery[data-count="2"],
  .mediaGallery[data-count="3"] {
    grid-template-columns: 1fr;
  }
}

.attachmentList {
  margin: 12px 0 0;

  padding: 0;

  list-style: none;

  display: flex;

  flex-wrap: wrap;

  gap: 10px;
}

.attachmentListItem {
  margin: 0;
}

.attachmentLink {
  display: inline-flex;

  align-items: center;

  gap: 6px;

  padding: 6px 12px;

  border-radius: 12px;

  border: 1px solid color-mix(in srgb, var(--surface-outline) 45%, transparent);

  background: color-mix(in srgb, var(--surface-1) 80%, var(--surface-3) 20%);

  color: inherit;

  text-decoration: none;

  transition:
    background-color 0.2s ease,
    border-color 0.2s ease;
}

.attachmentLink:hover,
.attachmentLink:focus-visible {
  border-color: color-mix(in srgb, var(--surface-outline) 65%, transparent);

  background: color-mix(in srgb, var(--surface-1) 70%, var(--surface-3) 30%);
}

.attachmentFileName {
  max-width: 180px;

  white-space: nowrap;

  overflow: hidden;

  text-overflow: ellipsis;

  font-size: 0.85rem;
}

.lightboxOverlay {
  position: fixed;

  inset: 0;

  background: var(--home-lightboxoverlay-background);

  z-index: 2200;

  display: flex;

  align-items: center;

  justify-content: center;

  padding: 32px 20px;

  backdrop-filter: blur(8px) saturate(180%);
}

.lightboxContent {
  position: relative;

  max-width: calc(100vw - 48px);

  max-height: calc(100vh - 48px);

  display: inline-flex;

  flex-direction: column;

  align-items: center;

  gap: 16px;
}

.lightboxClose {
  position: absolute;

  top: 12px;

  right: 12px;

  width: 38px;

  height: 38px;

  border-radius: 999px;

  border: none;

  background: var(--home-lightboxclose-background);

  color: var(--home-lightboxclose-color);

  font-size: 24px;

  line-height: 1;

  cursor: pointer;

  display: inline-flex;

  align-items: center;

  justify-content: center;

  transition:
    transform 0.15s ease,
    background-color 0.15s ease;

  z-index: 5; /* ensure above image content */

  pointer-events: auto;
}

.lightboxClose:hover,
.lightboxClose:focus-visible {
  transform: scale(1.05);

  background: var(--home-lightboxclose-focus-visible-background);

  outline: none;
}

.lightboxNav {
  position: absolute;

  top: 50%;

  transform: translateY(-50%);

  width: 44px;

  height: 44px;

  border-radius: 999px;

  border: none;

  background: var(--home-lightboxnav-background);

  color: var(--home-lightboxnav-color);

  font-size: 28px;

  line-height: 1;

  cursor: pointer;

  display: inline-flex;

  align-items: center;

  justify-content: center;

  transition:
    transform 0.15s ease,
    background-color 0.15s ease;
}

.lightboxNav:hover,
.lightboxNav:focus-visible {
  transform: translateY(-50%) scale(1.05);

  background: var(--home-lightboxnav-focus-visible-background);

  outline: none;
}

.lightboxNavPrev {
  left: 16px;
}

.lightboxNavNext {
  right: 16px;
}

.lightboxBody {
  flex: 1;

  width: auto;

  max-width: 100%;

  max-height: 100%;

  display: flex;

  align-items: center;

  justify-content: center;
}

.lightboxMedia {
  display: inline-flex;

  flex: 0 1 auto;

  align-items: center;

  justify-content: center;

  max-width: calc(100vw - 80px);

  max-height: calc(100vh - 160px);

  padding: 0;

  overflow: hidden;
}

.lightboxImage {
  display: block;

  width: auto;

  height: auto;

  max-width: min(90vw, 1200px);

  max-height: calc(100vh - 160px);

  object-fit: contain;
}

.lightboxVideo {
  display: block;

  width: auto;

  height: auto;

  max-width: min(90vw, 1200px);

  max-height: calc(100vh - 160px);

  background: var(--home-lightboxvideo-background);
}

.lightboxCaption {
  font-size: 0.95rem;

  color: var(--home-lightboxcaption-color);

  text-align: center;

  max-width: 90vw;
}

@media (max-width: 640px) {
  .lightboxOverlay {
    padding: 20px 12px;
  }

  .lightboxClose {
    top: 8px;

    right: 8px;
  }

  .lightboxNavPrev {
    left: 6px;
  }

  .lightboxNavNext {
    right: 6px;
  }

  .lightboxNav {
    width: 38px;

    height: 38px;
  }

  .lightboxImageWrap {
    height: min(70vh, 88vw);
  }
}

.title {
  font-size: 19px;

  font-weight: 800;

  margin: 10px 0 8px;

  background: linear-gradient(180deg, var(--heading-from), var(--heading-to));

  -webkit-background-clip: text;

  background-clip: text;

  color: transparent;
}

.postText {
  color: var(--text);

  line-height: 1.65;

  font-size: 1.05rem;
}

.actions {
  display: flex;

  gap: 10px;
}

.pill {
  display: inline-flex;

  align-items: center;

  gap: 6px;

  padding: 7px 12px;

  border-radius: 999px;

  border: 1px solid var(--pill-border);

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));

  font-size: 13px;

  font-weight: 700;

  color: var(--text);

  box-shadow: var(--home-pill-box-shadow);

  transition:
    transform 0.12s ease,
    border-color 0.16s ease,
    background 0.16s ease;
}

.pill:hover {
  transform: translateY(-1px);

  border-color: var(--home-pill-hover-border-color);
}

.pill:active {
  transform: translateY(0);
}

/* User meta (name + time) */

.userMeta {
  display: flex;

  align-items: center;

  gap: 10px;

  flex: 1;

  min-width: 0;
}

.userName {
  font-weight: 800;

  color: var(--text);

  letter-spacing: 0.01em;

  font-size: 1rem;
}

.timestamp {
  color: var(--text);

  font-weight: 600;

  font-size: 0.92rem;
}

/* Post avatar */

.userNameButton {
  background: none;

  border: none;

  padding: 0;

  color: color-mix(in srgb, var(--link-color) 65%, var(--color-fg));

  font: inherit;

  font-weight: inherit;

  letter-spacing: inherit;

  cursor: pointer;
}

.userNameButton:hover {
  text-decoration: underline;

  color: var(--color-brand-foreground, #e0e7ff);
}

.userNameButton:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-brand) 60%, transparent);

  outline-offset: 2px;

  border-radius: 6px;
}

.postFriendActions {
  margin: 6px 0 0 56px;

  display: flex;

  gap: 8px;
}

.postFriendButton {
  padding: 6px 12px;

  border-radius: 999px;

  border: 1px solid var(--pill-border);

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));

  color: var(--text);

  font-weight: 700;

  letter-spacing: 0.01em;

  cursor: pointer;
}

.postFriendButton:hover {
  border-color: var(--card-hover-border, rgba(255, 255, 255, 0.3));

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));
}

.postFriendButton[aria-busy="true"],
.postFriendButton:disabled {
  opacity: 0.6;

  cursor: progress;
}

.postFriendNotice {
  margin-bottom: 12px;

  padding: 10px 12px;

  border-radius: 12px;

  border: 1px solid color-mix(in srgb, var(--color-brand) 38%, transparent);

  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--color-brand) 18%, var(--surface-overlay)),
    color-mix(in srgb, var(--color-brand) 8%, transparent)
  );

  color: var(--text);

  font-weight: 600;

  text-align: center;
}

.avatarWrap {
  display: inline-flex;

  width: 44px;

  height: 44px;

  border-radius: 50%;

  overflow: hidden;

  align-items: center;

  justify-content: center;

  box-shadow: var(--shadow-sm, 0 4px 14px rgba(5, 10, 30, 0.35));

  border: 1px solid var(--pill-border);

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));
}

.avatarImg {
  display: block;

  width: 100%;

  height: 100%;

  object-fit: cover;
}

.avatar {
  width: 100%;

  height: 100%;

  border-radius: 50%;

  background: radial-gradient(
    100% 100% at 30% 30%,

    color-mix(in srgb, var(--color-fg) 65%, transparent),
    color-mix(in srgb, var(--color-fg) 12%, transparent)
  );
}

.separator {
  opacity: 0.55;

  color: var(--text);

  font-weight: 700;

  padding: 0 2px;
}

/* Quiet action row  subtle, content-first */

.actionBar {
  display: flex;

  align-items: stretch;

  justify-content: space-between;

  gap: 10px;

  padding: 8px 12px 10px;

  background: transparent;

  border-top: 1px solid var(--card-border);
}

.card:hover .actionBar,
.card:focus-within .actionBar {
  border-top-color: var(--card-hover-border, rgba(255, 255, 255, 0.12));
}

.actionBtn {
  flex: 1;

  min-width: 0;

  display: flex;

  align-items: center;

  justify-content: space-between;

  gap: 8px;

  padding: 8px 12px;

  border-radius: 12px;

  border: 1px solid var(--feed-action-border);

  background: linear-gradient(180deg, var(--feed-action-bg-1), var(--feed-action-bg-2));

  color: var(--text);

  font-weight: 700;

  text-align: left;

  transition:
    transform 0.14s ease,
    border-color 0.14s ease,
    background 0.14s ease,
    box-shadow 0.18s ease,
    color 0.14s ease;
}

.actionBtn:hover {
  transform: translateY(-1px);

  border-color: var(--feed-action-border);

  box-shadow: var(--feed-action-shadow-hover);
}

.actionBtn:active {
  transform: translateY(0);
}

.actionBtn:disabled {
  opacity: 0.6;

  cursor: not-allowed;

  transform: none;

  box-shadow: none;
}

.actionBtn:disabled .actionMeta {
  opacity: 0.85;
}

.actionMeta {
  display: flex;

  align-items: center;

  gap: 10px;
}

.actionIcon {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  width: 24px;

  height: 24px;

  /* Remove inner plate styling so icons stand alone */

  border: none;

  background: transparent;

  box-shadow: none;

  color: var(--text);

  transition:
    color 0.18s ease,
    background 0.18s ease;
}

.actionIcon svg {
  width: 20px;

  height: 20px;

  display: block;
}

.actionLabel {
  font-weight: 600;

  color: var(--text);
}

.actionCount {
  font-size: 0.85rem;

  font-weight: 700;

  color: var(--text);

  text-align: right;

  min-width: 28px;
}

.actionBtn:hover .actionLabel {
  color: var(--text);
}

/* Duotone: neutral by default, colorize on hover/active */

.actionBtn[data-variant="like"] .actionIcon,
.actionBtn[data-variant="comment"] .actionIcon,
.actionBtn[data-variant="share"] .actionIcon {
  color: var(--text);
}

.actionBtn[data-variant="like"]:hover .actionIcon,
.actionBtn[data-variant="like"][data-active="true"] .actionIcon {
  color: var(--color-danger);
}

.actionBtn[data-variant="comment"]:hover .actionIcon {
  color: var(--color-info);
}

.actionBtn[data-variant="share"]:hover .actionIcon {
  color: var(--color-warning);
}

.actionBtn[data-variant="like"][data-active="true"] {
  border-color: color-mix(in srgb, var(--color-danger) 55%, transparent);

  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--color-danger) 20%, transparent),
    color-mix(in srgb, var(--color-danger) 6%, transparent)
  );

  box-shadow: var(--shadow-md, 0 14px 32px rgba(248, 113, 113, 0.26));
}

.actionBtn[data-variant="like"][data-active="true"] .actionIcon {
  color: var(--color-danger);

  background: transparent;
}

.actionBtn[data-variant="like"][data-active="true"] .actionLabel {
  color: var(--text);
}

.rail {
  position: sticky;

  top: 80px;

  align-self: start;
}

.connectionTiles {
  display: grid;
  gap: 18px;
  grid-template-columns: 1fr;
  width: 100%;
  align-items: stretch;
  /* Provide the outer glass shell only for the tile view */
  padding: 10px;
  border-radius: 16px;
  border: 1px solid var(--rail-border);
  background: linear-gradient(180deg, var(--rail-bg-1), var(--rail-bg-2));
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.12),
    inset 0 -1px 0 rgba(2, 6, 23, 0.4),
    var(--card-shadow, 0 18px 40px rgba(5, 10, 30, 0.35));
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
}

.connectionTile {
  --tile-border-hover-base: var(--home-connectiontile-tile-border-hover-base);

  --tile-shadow-hover-base: var(--home-connectiontile-tile-shadow-hover-base);

  /* Accent system for subtle, futuristic glow */

  --tile-accent-a: color-mix(in srgb, var(--color-brand) 60%, var(--color-accent));

  --tile-accent-b: color-mix(in srgb, var(--color-accent) 55%, #8b5cf6);

  --tile-accent-c: color-mix(in srgb, var(--color-info) 40%, transparent);

  --tile-glow-opacity: 0.34;

  --tile-glow-opacity-hover: 0.5;

  display: flex;

  flex-direction: column;
  gap: 12px;
  width: 100%;
  padding: 20px 22px;

  border-radius: 20px;

  border: 1px solid var(--tile-border-final, var(--tile-border-base));

  background: var(--tile-bg-final, var(--tile-bg-base));

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.18),
    var(--tile-shadow-final, var(--tile-shadow-base));

  color: var(--tile-text-final, var(--tile-text-base));

  text-decoration: none;

  transition:
    transform 0.16s ease,
    box-shadow 0.16s ease,
    border-color 0.16s ease;

  position: relative;

  overflow: hidden;

  isolation: isolate;
}

.connectionTile:hover {
  transform: translateY(-2px);

  border-color: var(--tile-border-hover, var(--tile-border-hover-base));

  box-shadow: var(--tile-shadow-hover, var(--tile-shadow-hover-base));
}

/* Remove soft animated glow behind content */

.connectionTile::before {
  content: none;
}

.connectionTileHeader {
  display: flex;

  align-items: center;

  justify-content: space-between;

  gap: 14px;
}

.connectionTileMeta {
  display: flex;

  align-items: center;

  gap: 12px;
}

.connectionTileIcon {
  width: 42px;

  height: 42px;

  border-radius: 14px;

  display: flex;

  align-items: center;

  justify-content: center;

  background: var(--tile-icon-bg-final, var(--tile-icon-bg-base));

  color: var(--tile-icon-color-final, var(--tile-icon-color-base));

  font-size: 0;

  box-shadow:
    0 10px 22px color-mix(in srgb, var(--tile-accent-a) 32%, transparent),
    inset 0 1px 0 rgba(255, 255, 255, 0.22);
}

.connectionTileIcon .duo {
  width: 28px;

  height: 28px;
}

.connectionTileIcon svg {
  width: 26px;

  height: 26px;
}

.connectionTileTitle {
  font-weight: 800;

  font-size: 1.07rem;
}

.connectionTileBadge {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  padding: 4px 10px;

  min-width: 28px;

  border-radius: 999px;

  font-size: 0.78rem;

  font-weight: 700;

  background: var(--tile-badge-bg-final, var(--tile-badge-bg-base));

  color: var(--tile-badge-color-final, var(--tile-badge-color-base));
}

.connectionTileBadgeToken {
  gap: 6px;

  padding: 5px 12px;

  min-width: 0;

  border: 1px solid
    color-mix(in srgb, var(--pill-border, rgba(255, 255, 255, 0.26)) 92%, transparent);

  background: linear-gradient(
    180deg,
    var(
      --pill-bg-1,
      color-mix(in srgb, var(--tile-badge-bg-final, var(--tile-badge-bg-base)) 92%, transparent)
    ),
    var(--pill-bg-2, var(--tile-badge-bg-final, var(--tile-badge-bg-base)))
  );

  box-shadow: var(--home-pill-box-shadow, 0 6px 12px rgba(5, 10, 30, 0.24));

  color: var(--tile-badge-color-final, var(--tile-badge-color-base));

  font-variant-numeric: tabular-nums;
}

.connectionTileBadgeIcon {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  width: 18px;

  height: 18px;

  border-radius: 999px;

  background: color-mix(in srgb, var(--pill-bg-2, rgba(255, 255, 255, 0.3)) 65%, transparent);

  color: inherit;
}

.connectionTileBadgeGlyph {
  display: inline-flex;

  width: 14px;

  height: 14px;
}

.connectionTileBadgeGlyph svg {
  width: 100%;

  height: 100%;
}

.connectionTileBadgeCount {
  line-height: 1;
}

.connectionTileDescription {
  color: var(--tile-desc-final, var(--tile-desc-base));

  font-weight: 600;

  font-size: 0.9rem;

  line-height: 1.55;
}

/* Ensure tile content sits above animated glow */

.connectionTile > * {
  position: relative;

  z-index: 1;
}

.connectionTile[data-tile="friends"] {
  /* Distinct cyan/teal tint fallback if style tokens are absent */

  --tile-bg-final: var(
    --style-friends-bg,
    linear-gradient(
      155deg,
      color-mix(in srgb, var(--color-success) 48%, rgba(16, 185, 129, 0.26)),
      color-mix(in srgb, var(--color-accent) 28%, rgba(13, 148, 136, 0.12))
    ),
    var(--tile-bg-base)
  );

  --tile-border-final: var(
    --style-friends-border,
    color-mix(in srgb, var(--color-success) 54%, var(--tile-border-base)) \r\n
  );

  --tile-text-final: var(--style-friends-text, var(--tile-text-base));

  --tile-shadow-final: var(--style-friends-shadow, var(--tile-shadow-base));

  --tile-icon-bg-final: var(
    --style-friends-icon-bg,
    color-mix(in srgb, var(--color-success) 44%, rgba(255, 255, 255, 0.14))
  );

  --tile-icon-color-final: var(--style-friends-icon-color, var(--tile-icon-color-base));

  --tile-desc-final: var(--style-friends-desc, var(--tile-desc-base));

  --tile-badge-bg-final: var(--style-friends-badge-bg, var(--tile-badge-bg-base));

  --tile-badge-color-final: var(--style-friends-badge-color, var(--tile-badge-color-base));

  --tile-border-hover: var(--style-friends-border-hover, var(--tile-border-hover-base));

  --tile-shadow-hover: var(--style-friends-shadow-hover, var(--tile-shadow-hover-base));

  --tile-accent-a: color-mix(in srgb, var(--color-success) 66%, #2dd4bf);

  --tile-accent-b: color-mix(in srgb, var(--color-success) 51%, #34d399);

  --tile-accent-c: color-mix(in srgb, var(--color-success) 34%, rgba(20, 83, 45, 0.85));

  --tile-glow-opacity: 0.38;
}

.connectionTile[data-tile="party"] {
  --tile-bg-final: var(
    --style-party-bg,
    linear-gradient(
      160deg,
      color-mix(in srgb, var(--color-brand) 26%, transparent),
      color-mix(in srgb, var(--color-info) 18%, transparent)
    ),
    var(--tile-bg-base)
  );
  --tile-border-final: var(
    --style-party-border,
    color-mix(in srgb, var(--color-brand) 34%, var(--tile-border-base))
  );
  --tile-text-final: var(--style-party-text, var(--tile-text-base));
  --tile-shadow-final: var(--style-party-shadow, var(--tile-shadow-base));
  --tile-icon-bg-final: var(
    --style-party-icon-bg,
    color-mix(in srgb, var(--color-brand) 26%, rgba(255, 255, 255, 0.12))
  );
  --tile-icon-color-final: var(--style-party-icon-color, var(--tile-icon-color-base));
  --tile-desc-final: var(--style-party-desc, var(--tile-desc-base));
  --tile-badge-bg-final: var(--style-party-badge-bg, var(--tile-badge-bg-base));
  --tile-badge-color-final: var(--style-party-badge-color, var(--tile-badge-color-base));
  --tile-border-hover: var(--style-party-border-hover, var(--tile-border-hover-base));
  --tile-shadow-hover: var(--style-party-shadow-hover, var(--tile-shadow-hover-base));
  /* Use tokenized party accent colors; fall back keeps existing look */
  --tile-accent-a: var(
    --style-party-accent-a,
    color-mix(in srgb, var(--header-brand-color, var(--color-info)) 58%, #3b82f6)
  );
  --tile-accent-b: var(
    --style-party-accent-b,
    color-mix(in srgb, var(--header-brand-strong-color, #2563eb) 46%, #0ea5e9)
  );
  --tile-accent-c: var(
    --style-party-accent-c,
    color-mix(in srgb, var(--header-brand-strong-color, #2563eb) 28%, rgba(15, 23, 42, 0.72))
  );
  --tile-glow-opacity: 0.28;
}

.connectionTile[data-tile="chats"] {
  /* Distinct indigo/azure tint fallback if style tokens are absent */

  --tile-bg-final: var(
    --style-chats-bg,
    linear-gradient(
      160deg,
      color-mix(in srgb, var(--color-info) 26%, transparent),
      color-mix(in srgb, var(--color-brand) 12%, transparent)
    ),
    var(--tile-bg-base)
  );

  --tile-border-final: var(
    --style-chats-border,
    color-mix(in srgb, var(--color-info) 35%, var(--tile-border-base)) \r\n
  );

  --tile-text-final: var(--style-chats-text, var(--tile-text-base));

  --tile-shadow-final: var(--style-chats-shadow, var(--tile-shadow-base));

  --tile-icon-bg-final: var(
    --style-chats-icon-bg,
    color-mix(in srgb, var(--color-info) 26%, rgba(255, 255, 255, 0.12))
  );

  --tile-icon-color-final: var(--style-chats-icon-color, var(--tile-icon-color-base));

  --tile-desc-final: var(--style-chats-desc, var(--tile-desc-base));

  --tile-badge-bg-final: var(--style-chats-badge-bg, var(--tile-badge-bg-base));

  --tile-badge-color-final: var(--style-chats-badge-color, var(--tile-badge-color-base));

  --tile-border-hover: var(--style-chats-border-hover, var(--tile-border-hover-base));

  --tile-shadow-hover: var(--style-chats-shadow-hover, var(--tile-shadow-hover-base));

  --tile-accent-a: color-mix(in srgb, var(--color-brand) 65%, #0ea5e9);

  --tile-accent-b: color-mix(in srgb, var(--color-info) 48%, #4f46e5);

  --tile-accent-c: color-mix(in srgb, var(--color-brand) 32%, transparent);

  --tile-glow-opacity: 0.32;
}

.connectionTile[data-tile="requests"] {
  /* Distinct amber/emerald tint fallback if style tokens are absent */

  --tile-bg-final: var(
    --style-requests-bg,
    linear-gradient(
      160deg,
      color-mix(in srgb, var(--color-warning) 42%, rgba(255, 255, 255, 0.18)),
      color-mix(in srgb, var(--color-success) 22%, rgba(255, 255, 255, 0.12))
    ),
    var(--tile-bg-base)
  );

  --tile-border-final: var(
    --style-requests-border,
    color-mix(in srgb, var(--color-warning) 38%, var(--tile-border-base)) \r\n
  );

  --tile-text-final: var(--style-requests-text, var(--tile-text-base));

  --tile-shadow-final: var(--style-requests-shadow, var(--tile-shadow-base));

  --tile-icon-bg-final: var(
    --style-requests-icon-bg,
    color-mix(in srgb, var(--color-warning) 52%, rgba(255, 255, 255, 0.14))
  );

  --tile-icon-color-final: var(--style-requests-icon-color, var(--tile-icon-color-base));

  --tile-desc-final: var(--style-requests-desc, var(--tile-desc-base));

  --tile-badge-bg-final: var(--style-requests-badge-bg, var(--tile-badge-bg-base));

  --tile-badge-color-final: var(--style-requests-badge-color, var(--tile-badge-color-base));

  --tile-border-hover: var(--style-requests-border-hover, var(--tile-border-hover-base));

  --tile-shadow-hover: var(--style-requests-shadow-hover, var(--tile-shadow-hover-base));

  --tile-accent-a: color-mix(in srgb, var(--color-warning) 68%, #f59e0b);

  --tile-accent-b: color-mix(in srgb, var(--color-success) 42%, #34d399);

  --tile-accent-c: color-mix(in srgb, var(--color-warning) 36%, transparent);
}

@keyframes tileGlow {
  0% {
    transform: translate3d(-2%, -2%, 0) scale(1);
  }

  50% {
    transform: translate3d(2%, 2%, 0) scale(1.03);
  }

  100% {
    transform: translate3d(-2%, -2%, 0) scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .connectionTile::before {
    animation: none;
  }
}

@media (max-width: 1000px) {
  .rail {
    display: none;
  }
}

/* Right-rail in-place connections view */

.railConnections {
  display: grid;
  gap: 12px;
  grid-template-rows: auto auto minmax(0, 1fr);
  height: min(100%, calc(100vh - var(--header-height, 96px) - 48px));
  min-height: 0;
}

.railConnectionsOuter {
  margin-left: var(--connections-rail-offset, -60px);
}

@media (max-width: 1024px) {
  .railConnectionsOuter {
    margin-left: var(--connections-rail-offset-md, -50px);
  }
}

@media (max-width: 900px) {
  .railConnectionsOuter {
    margin-left: var(--connections-rail-offset-sm, -40px);
  }
}

@media (max-width: 768px) {
  .railConnectionsOuter {
    margin-left: var(--connections-rail-offset-xs, 0px);
  }
}

.railHeaderRow {
  display: flex;

  align-items: center;

  justify-content: flex-start;
}

.railHeaderAction {
  margin-left: auto;

  display: flex;

  align-items: center;
}

.railBackBtn {
  width: 32px;

  height: 32px;

  display: inline-flex;

  align-items: center;

  justify-content: center;

  border-radius: 999px;

  border: 1px solid var(--pill-border);

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));

  color: var(--text);

  font-weight: 800;

  box-shadow: var(--home-railbackbtn-box-shadow);
}

.railBackBtn:hover {
  transform: translateY(-1px);

  border-color: var(--card-hover-border, rgba(255, 255, 255, 0.26));
}

.railBackBtn:focus-visible {
  outline: 2px solid
    color-mix(in srgb, var(--home-railtab-accent, var(--color-brand)) 55%, transparent);

  outline-offset: 2px;
}

.railTabs {
  display: grid;

  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));

  gap: 8px;

  padding: 8px;

  /* Visually attach to the panel below */

  margin-bottom: 0; /* remove gap so borders meet */

  border-radius: 16px;

  border: 1px solid var(--card-border);

  background: linear-gradient(
    180deg,
    var(--glass-bg-1, rgba(255, 255, 255, 0.08)),
    var(--glass-bg-2, rgba(255, 255, 255, 0.04))
  );

  box-shadow: var(--home-railtabs-box-shadow);

  backdrop-filter: blur(10px) saturate(120%);

  -webkit-backdrop-filter: blur(10px) saturate(120%);

  position: relative;

  z-index: 2;

  border-bottom-left-radius: 0;

  border-bottom-right-radius: 0;
}

.railTab {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  gap: 8px;

  padding: 9px 12px;

  border-radius: var(--pill-radius, 999px);

  border: 1px solid var(--pill-border);

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));

  color: var(--text);

  font-weight: 800;

  letter-spacing: 0.01em;

  box-shadow: var(--home-railtab-box-shadow);

  width: 100%;

  transition:
    transform 0.16s ease,
    border-color 0.16s ease,
    box-shadow 0.16s ease,
    background 0.16s ease;
}

.railTab:hover {
  border-color: var(--card-hover-border, rgba(255, 255, 255, 0.26));

  transform: translateY(-1px);
}

.railTab:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-brand) 55%, transparent);

  outline-offset: 2px;
}

.railTabActive {
  color: var(--text);

  border-color: color-mix(
    in srgb,
    var(--home-railtab-accent, var(--color-brand)) 45%,
    var(--pill-border)
  );

  background: linear-gradient(180deg, var(--pill-bg-1), var(--pill-bg-2));

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.16),
    inset 0 -1px 0 rgba(5, 8, 28, 0.42),
    0 8px 18px
      color-mix(in srgb, var(--home-railtab-accent, var(--color-brand)) 18%, rgba(5, 10, 30, 0.28)); /* reduced drop */
}

.railTabIcon {
  display: inline-flex;

  align-items: center;

  justify-content: center;

  width: 20px;

  height: 20px;

  font-size: 0;
}

.railTabIcon .duo {
  width: 18px;

  height: 18px;
}

.railTabIcon svg {
  width: 18px;

  height: 18px;
}

.railPanel {
  margin-top: -1px; /* overlap 1px to hide seam with tabs */

  border-radius: var(--card-radius, 16px);

  border: 1px solid var(--card-border);

  background: linear-gradient(180deg, var(--card-bg-1), var(--card-bg-2));

  padding: 12px;

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.12),
    inset 0 -1px 0 rgba(2, 6, 23, 0.42),
    var(--card-shadow, 0 18px 40px rgba(5, 10, 30, 0.35));

  backdrop-filter: blur(10px) saturate(120%);

  -webkit-backdrop-filter: blur(10px) saturate(120%);

  position: relative;

  z-index: 1;

  display: flex;
  flex-direction: column;
  min-height: 0;

  overflow: hidden; /* avoid visible overlap artifacts at corners */

  border-top-left-radius: 0;

  border-top-right-radius: 0;
}

.railPanel[data-tab="friends"],
.railPanel[data-tab="party"],
.railPanel[data-tab="requests"] {
  overflow: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable;
}

@media (max-width: 1000px) {
  .railConnections {
    height: auto;
    max-height: none;
    overflow: visible;
  }
}
